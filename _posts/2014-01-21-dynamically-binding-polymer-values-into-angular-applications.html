---
title: 'Dynamically Binding Polymer Values into Angular Applications'
layout: post
tags:
    - angular
    - chain
    - dart
    - dartlang
    - polymer
category: japhr-by-chris-strom
published: '2014-01-21T23:59:00-05:00'

---

<div class=top-chain-links></div><br />Must. Stop. <a href="http://dartlang.org">Dart</a>.<br /><br />I am getting too far ahead of myself while researching <a href="http://patternsinpolymer.com">Patterns in Polymer</a>. For the most part, I try to keep the Dart and JavaScript investigation in sync. But recently I pushed straight through SVG and on into <a href="https://github.com/angular/angular.dart">Angular</a> research with Dart. I really need to work my way back to do both in JavaScript (and to write new chapters on both). <br /><br />But darn it, <a href="https://plus.google.com/+SethLadd">Seth Ladd</a> pointed out the <a href="http://pub.dartlang.org/packages/angular_node_bind">angular_node_bind</a> package andâ€¦ ooh, shiny!<br /><br />But really, I think that packages answers a need that I had for extracting data from my <code>&lt;x-pizza></code> Polymer for use in the containing the Angular application:<br /><br /><a href="http://3.bp.blogspot.com/-KtcJk69PFUk/Ut8upoBqtyI/AAAAAAAAU5I/JWlqVP6_Oe8/s1600/02-custom_angulage_page.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-KtcJk69PFUk/Ut8upoBqtyI/AAAAAAAAU5I/JWlqVP6_Oe8/s640/02-custom_angulage_page.png" /></a><br /><br />I start with the usual, adding <code>angular_node_bind</code> to the list of my application's dependendencies in <code>pubspec.yaml</code>:<pre class=prettyprint>name: angular_example<br />dependencies:<br />  angular: any<br />  polymer: any<br /><b>  angular_node_bind: any</b><br />dev_dependencies:<br />  unittest: any<br />transformers:<br />- polymer:<br />    entry_points:<br />    - web/index.html</pre>While reading through the <a href="https://github.com/dart-lang/angular_node_bind/blob/master/example">angular_node_bind example code</a>, I notice an alternate syntax for initializing a Polymer-powered Angular application. After last night, I already know that I have to manually start the Polymer platform with <code>initPolymer()</code> in my application's <code>main()</code> entry point:<pre class="prettyprint">main() {<br /><b>  initPolymer();</b><br /><br />  var store = new AngularModule()<br />    ..type(RouteInitializer, implementedBy: StoreRouter);<br /><br />  ngBootstrap(module: store);<br />}</pre>But it seems that it may be more proper to perform that initialization inside a Polymer <code>run()</code>:<pre class=prettyprint>main() {<br />  initPolymer().run((){<br /><br />    var store = new AngularModule()<br />      ..type(NodeBindModule)<br />      ..type(RouteInitializer, implementedBy: StoreRouter);<br /><br />    ngBootstrap(module: store);<br />  });<br />}</pre>Even better, the new Angular.dart way of doing things seems to be running those <code>type()</code> injects inside a proper constructor:<pre class="prettyprint"><b>class StoreModule extends Module {<br />  StoreModule() {<br />    type(NodeBindDirective);<br />    type(RouteInitializer, implementedBy: StoreRouter);<br />  }<br />}</b><br /><br />main() {<br />  initPolymer().run((){<br /><b>    ngBootstrap(module: new StoreModule());</b><br />  });<br />}</pre>However it is done, that should give me what I want: angular binding to my Polymer attributes. So I test this out in my customizing pizza page. The double square brackets should bind an expression for me:<pre class="prettyprint">&lt;h3>Oooh! Let's make beautiful pizza together&lt;/h3><br /><br />&lt;pre>[[ pizza ]]&lt;/pre><br /><br />&lt;p><br />  &lt;x-pizza pizzaState="[[ pizza ]]">&lt;/x-pizza><br />&lt;/p><br /></pre>But, when I load the page up, I am getting a nice old stacktrace:<pre class=prettyprint>Class 'DynamicExpression' has no instance getter 'assignable'.<br /><br />NoSuchMethodError : method not found: 'assignable'<br />Receiver: Instance of 'DynamicExpression'<br />Arguments: []<br /><br />STACKTRACE:<br />#0      Object.noSuchMethod (dart:core-patch/object_patch.dart:45)<br />#1      NodeBindDirective.NodeBindDirective (package:angular_node_bind/angular_node_bind.dart:61:24)<br />#2      _LocalClassMirror._invokeConstructor (dart:mirrors-patch/mirrors_impl.dart:795)<br />#3      _LocalClassMirror.newInstance (dart:mirrors-patch/mirrors_impl.dart:736)<br />#4      DynamicInjector.newInstanceOf (package:di/dynamic_injector.dart:44:35)<br />#5      _TypeProvider.get (package:di/module.dart:142:29)<br />#6      Injector._getInstanceByType.&lt;anonymous closure> (package:di/injector.dart:118:31)<br />#7      _defaultCreationStrategy (package:di/module.dart:106:34)<br />#8      Injector._getInstanceByType (package:di/injector.dart:116:23)<br />#9      Injector._getInstanceByType (package:di/injector.dart:124:7)<br />#10     Injector.get (package:di/injector.dart:173:47)<br />...</pre>And I cannot quite figure this one out.<br /><br /><b>Update:</b> I was able to get this working with <a href="https://github.com/dart-lang/angular_node_bind/pull/1">a simple change to angular_node_bind</a>. With that, I can update my Polymer <code>&lt;x-pizza></code> and see the changes in my Angular application:<br /><br /><a href="http://2.bp.blogspot.com/-sPyKnCrm-hE/Ut9aRDgRq9I/AAAAAAAAU5Y/RTrzU5o9EvA/s1600/01-bound_polymer_in_angular.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-sPyKnCrm-hE/Ut9aRDgRq9I/AAAAAAAAU5Y/RTrzU5o9EvA/s640/01-bound_polymer_in_angular.png" /></a><br /><br />Phew! That's a load off my mind. With that, I think I am safe going back to JavaScript-ify this SVG / Angular application.<br /><br /><br /><span style="color: #ccc">Day #1,003</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/01/observable-polymers-in-angular.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/01/javascript-polymer-svg.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script>
