---
title: 'Day 1,001: Getting Started with Angular and Polymer (Dart)'
layout: post
tags:
    - angular
    - chain
    - dart
    - dartlang
    - polymer
category: japhr-by-chris-strom
published: '2014-01-19T23:59:00-05:00'

---

<div class=top-chain-links></div><br />Up today, I start experimenting with <a href="https://github.com/angular/angular.dart">Angular.dart</a> and <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a>. For tonight, I would like to start with a simple Angular application and see what, if anything, I need to do in order to use my amazing <code>&lt;x-pizza></code> Polymer:<br /><br /><a href="http://1.bp.blogspot.com/-LwkN9NM4AHs/UtyevgqkCqI/AAAAAAAAU3w/ksktuqUHJ8A/s1600/01-x_pizza_the_svg_pizza_builder.png" imageanchor="1" ><img border="0" src="http://1.bp.blogspot.com/-LwkN9NM4AHs/UtyevgqkCqI/AAAAAAAAU3w/ksktuqUHJ8A/s640/01-x_pizza_the_svg_pizza_builder.png" /></a><br /><br />I actually need to go back and fix that Polymer up some, but I think the learning ground is more fertile at this point with Angular than with refactoring or converting to JavaScript. Still, I do need to do both before <code>&lt;x-pizza></code> is <a href="http://patternsinpolymer.com">Patterns in Polymer</a> worthy. Anywayâ€¦<br /><br />Angular. I love it. I am probably a horrible person to ask an opinion on libraries and frameworks. Most people seem to be absolutely certain that some are better than others. I am unable to make decisions like that until I work with a library enough that it starts to affect how I think about other tools. By that time, I have almost always found some great use-cases for the tool at hand, leaving me hard pressed to dislike outright.<br /><br />So, for a guy that co-authored <a href="http://recipeswithbackbone.com/">Recipes with Backbone</a> and who still loves coding in <a href="http://documentcloud.github.com/backbone/">Backbone.js</a>, I also love Angular. Mostly I am glad to know both as I think they have overlap, but also different use-cases. <br /><br />The use case that I would like to explore in Angular tonight is an online pizza store. I have an <code>&lt;x-pizza></code> Polymer, which seems like it could be put to nice use throughout such an app.<br /><br />I start with a <code>pubspec.yaml</code> that includes both the Angular and Polymer packages, but does <i>not</i> include the usual Polymer transformer:<pre class=prettyprint>name: angular_example<br />dependencies:<br />  angular: any<br />  polymer: any<br />dev_dependencies:<br />  unittest: any<br /># transformers:<br /># - polymer:<br />#     entry_points: web/index.html</pre>I am unsure how the transformer would interact with Angular, so I leave that out of the equation tonight.<br /><br />While working with raw Polymer, I have needed to include initialization code in the web page:<pre class=prettyprint><code>    &lt;!-- Load component(s) --><br />    &lt;link rel="import" href="packages/angular_example/elements/x-pizza.html"><br /><b>    &lt;!-- Load Polymer --><br />    &lt;script type="application/dart"><br />      export 'package:polymer/init.dart';<br />    &lt;/script></b></code></pre>I do not think that will work in an Angular application, which needs to spin itself up without another Dart script gumming up the works. I don't <i>think</i> that will work, but I am not positive. To find out for sure, I set up my page with both Angular and Polymer initialization (Angular stuff goes in <code>main.dart</code>):<pre class=prettyprint>&lt;!DOCTYPE html><br />&lt;html ng-app lang="en"><br />  &lt;head><br />    &lt;title>Pizza Store&lt;/title><br /><br /><b>    &lt;script type="application/dart" src="main.dart">&lt;/script></b><br /><br /><b>    &lt;!-- Load component(s) --><br />    &lt;link rel="import" href="packages/angular_example/elements/x-pizza.html"><br />    &lt;!-- Load Polymer --><br />    &lt;script type="application/dart"><br />      export 'package:polymer/init.dart';<br />    &lt;/script></b><br />  &lt;/head><br />  &lt;body><br />    &lt;div class="container"><br />      &lt;h1>Dart Bros. Pizza Shoppe&lt;/h1><br />      &lt;ng-view>&lt;/ng-view><br />    &lt;/div><br />  &lt;/body><br />&lt;/html></pre>But, when I load that page, I see the following in the console:<pre class=prettyprint>[ERROR] Only one Dart script tag allowed per document</pre>Bother. But not too much of a bother. <br /><br />Back when I was <a href="http://japhr.blogspot.com/2013/11/testing-polymerdart-web-components.html">learning to test Polymer</a>, I needed to initialize Polymer without using that script. That turned out to be pretty easy. Instead of exporting that one script, I import the Polymer packages into my <code>main.dart</code> Angular app and invoke <code>initPolymer</code>:<pre class=prettyprint><b>import 'package:polymer/polymer.dart';</b><br />import 'package:angular/angular.dart';<br />import 'package:angular/routing/module.dart';<br />import 'package:angular_example/store.dart';<br /><br />main() {<br /><b>  initPolymer();</b><br /><br />  var store = new AngularModule()<br />    ..type(RouteInitializer, implementedBy: StoreRouter);<br /><br />  ngBootstrap(module: store);<br />}</pre>In addition to removing the export, I also need to ensure that the usual <code>&lt;link></code> imports of Polymer elements occur before the main.dart script:<pre class="prettyprint">&lt;!DOCTYPE html><br />&lt;html ng-app lang="en"><br />  &lt;head><br />    &lt;title>Pizza Store&lt;/title><br /><b>    &lt;link rel="import" href="packages/angular_example/elements/x-pizza.html"><br />    &lt;script type="application/dart" src="main.dart">&lt;/script></b><br />  &lt;/head><br />  &lt;body><br />    &lt;div class="container"><br />      &lt;h1>Dart Bros. Pizza Shoppe&lt;/h1><br />      &lt;ng-view>&lt;/ng-view><br />    &lt;/div><br />  &lt;/body><br />&lt;/html></pre>With that, I am ready to take a look at my Angular application. As I said, I am starting very simple here. So simple, in fact, that I have a router and nothing more. The router declares two pages: the default start page and the custom pizza builder page:<pre class=prettyprint>import 'package:angular/angular.dart';<br />import 'package:angular/routing/module.dart';<br /><br />class StoreRouter implements RouteInitializer {<br />  Scope _scope;<br />  StoreRouter(this._scope);<br /><br />  void init(Router router, ViewFactory view) {<br />    router.root<br />      ..addRoute(<br />          defaultRoute: true,<br />          name: 'start',<br />          enter: view('partials/home.html')<br />        )<br />      ..addRoute(<br />          name: 'custom-pizza',<br />          path: '/pizza/custom',<br />          enter: view('partials/custom.html')<br />        );<br />  }<br />}</pre>I define my two partials. The <code>home.html</code> is a simple page that links to the route defined for building custom pizza:<pre class="prettyprint">&lt;h3>This is the home of darty pizza&lt;/h3><br /><br />&lt;p><br />  Why not<br /> &lt;a href="/pizza/custom">build your own, awesome pizza&lt;/a>!<br />&lt;/p></pre>When I first load the application, I see:<br /><br /><a href="http://2.bp.blogspot.com/-gPbETFdCmPc/Utysqwe7XOI/AAAAAAAAU4A/qBRE5Wf88wA/s1600/01-default_angular_pizza_page.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-gPbETFdCmPc/Utysqwe7XOI/AAAAAAAAU4A/qBRE5Wf88wA/s640/01-default_angular_pizza_page.png" /></a><br /><br />Similarly, I define the <code>custom.html</code> partial as:<pre class="prettyprint">&lt;h3>Oooh! Let's make beautiful pizza together&lt;/h3><br /><br />&lt;p><br />  &lt;x-pizza>&lt;/x-pizza><br />&lt;/p><br /></pre>Which results in:<br /><br /><a href="http://3.bp.blogspot.com/-qipGOmn3w_I/Utysq7rTDEI/AAAAAAAAU4E/NWMFqf3svyw/s1600/02-custom_angulage_page.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-qipGOmn3w_I/Utysq7rTDEI/AAAAAAAAU4E/NWMFqf3svyw/s640/02-custom_angulage_page.png" /></a><br /><br />That was rather easy to get working! Of course, I have yet to do anything real with this. I am not taking advantage of any of Angular's features and would very much like to explore binding values from Polymers into Angular applications. But that is grist for another day. For tonight, I am quite happy with the progress so far.<br /><br /><br /><span style="color: #ccc">Day #1,001</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/01/day-1000-animated-svg-in-polymer.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/01/observable-polymers-in-angular.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script>
