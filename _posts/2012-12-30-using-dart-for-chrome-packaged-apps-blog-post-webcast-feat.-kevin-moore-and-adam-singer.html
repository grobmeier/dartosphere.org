---
title: 'Using Dart for Chrome Packaged Apps (blog post + webcast feat. Kevin Moore and Adam Singer)'
layout: post
tags:
    - webcast
    - article
category: dartwatch
published: '2012-12-30T11:07:00+00:00'

---

<span style="font-family: Arial, Helvetica, sans-serif; font-size: x-small; white-space: pre-wrap;"><b>Update (9th Jan 2013)</b> - The editor is now able to help you develop chrome apps - <a href="http://news.dartlang.org/2013/01/new-dart-editor-build-with-expanded-windows-chrome-apps-support.html">check out the news.</a></span><br />
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;"><br /></span>
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;">You can use Dart to build webapps, running Dart on the server side, or converted to JavaScript in the browser, client site. &nbsp;But what about “native” apps, that appear to be part of the surrounding OS, and not part of a web browser? &nbsp;Through a fortunate combination of technologies, you can now build “native-like” apps using <a href="http://developer.chrome.com/apps/about_apps.html" target="_blank">Chrome Packaged Apps</a> technology, with the structured Dart language.</span><br />
<div>
<span style="font-family: Arial, Helvetica, sans-serif;"><br /></span>
<br />
<div style="white-space: pre-wrap;">
<span style="font-family: Arial, Helvetica, sans-serif;">Take a quick (~1 min) look at Kevin Moore’s <a href="https://github.com/dart-lang/pop-pop-win" target="_blank">Pop-pop-win game, written in Dart</a>, and converted into a Chrome Packaged App, which you can <a href="https://chrome.google.com/webstore/detail/pop-pop-win/mbghebmoaofincenahdohhpkljnkbbcn" target="_blank">install from the Chrome Webstore</a>.</span></div>
<span style="font-family: Arial, Helvetica, sans-serif;">
</span>
<br />
<div style="white-space: pre-wrap;">
<span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div>
<div class="separator" style="clear: both; text-align: center; white-space: pre-wrap;">
<span style="font-family: Arial, Helvetica, sans-serif;"><object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="http://i.ytimg.com/vi/SN8-yin_i-w/0.jpg" height="266" width="320"><param name="movie" value="http://www.youtube.com/v/SN8-yin_i-w?version=3&f=user_uploads&c=google-webdrive-0&app=youtube_gdata" /><param name="bgcolor" value="#FFFFFF" /><param name="allowFullScreen" value="true" /><embed width="320" height="266"  src="http://www.youtube.com/v/SN8-yin_i-w?version=3&f=user_uploads&c=google-webdrive-0&app=youtube_gdata" type="application/x-shockwave-flash" allowfullscreen="true"></embed></object></span></div>
<div class="separator" style="clear: both; text-align: center; white-space: pre-wrap;">
<span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div>
<div>
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;">Chrome Packaged Apps are Apps that deliver a native experience, but are written as web-apps using web technologies, such as HTML5, CSS and JavaScript, or Dart.  They run in a Chrome process that is separate from the web browser, and as such, blend seamlessly into your OS alongside other native apps.  In addition, they have greater access to the underlying hardware, such as USB or serial ports, socket level protocols, and the file-system via the chrome.* API libraries.  Once you have packaged your app, you can send it to the chrome webstore for other users to download and install, where it is available as a stand-alone application.</span><br />
<br />
<br />
<span style="font-family: Arial, Helvetica, sans-serif;"><span style="white-space: pre-wrap;">Later in this blog post, we will convert the Dart Editor's "Hello World" application into a Chrome Packaged App,  but first, let me introduce Dart developer experts <a href="https://plus.google.com/u/0/110066012384188006594/about" target="_blank">+Kevin Moore</a> and <a href="https://plus.google.com/u/0/104569492481999771226/about" target="_blank">+Adam Singer</a>.  I interviewed them a couple of days ago about their experiences with Chrome Packaged Apps in Dart.  Kevin discusses his experience building pop-pop-win as a chrome packaged app, and Adam talks about his <a href="https://github.com/financeCoding/chrome.dart" target="_blank">chrome.dart</a> library project, which exposes many of the chrome.* API’s to a Dart application.</span><span style="white-space: pre-wrap;">
</span></span><br />
<div>
<span style="font-family: Arial, Helvetica, sans-serif;"><span style="white-space: pre-wrap;"><br /></span></span></div>
<div class="separator" style="clear: both; text-align: center;">
<object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="http://i.ytimg.com/vi/8fIyMbZda4g/0.jpg" height="266" width="320"><param name="movie" value="http://www.youtube.com/v/8fIyMbZda4g?version=3&f=user_uploads&c=google-webdrive-0&app=youtube_gdata" /><param name="bgcolor" value="#FFFFFF" /><param name="allowFullScreen" value="true" /><embed width="320" height="266"  src="http://www.youtube.com/v/8fIyMbZda4g?version=3&f=user_uploads&c=google-webdrive-0&app=youtube_gdata" type="application/x-shockwave-flash" allowfullscreen="true"></embed></object></div>
<div>
<span style="font-family: Arial, Helvetica, sans-serif;"><span style="white-space: pre-wrap;"><br /></span></span></div>
<br />
<br /></div>
<div>
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;">Many of the url's and apps referenced in the webcast are listed in the references section at the end of this blog post.</span><br />
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;"><br /></span>
<br />
<h2>
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;">Creating your own Packaged App </span></h2>
<span style="font-family: Arial, Helvetica, sans-serif; white-space: pre-wrap;">In the rest of this blog post, you will see how you can convert the Dart Editor’s “Hello World” app into a Chrome Packaged App, as shown in the image below. 
</span></div>
<div>
<span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><img border="0" height="200" src="http://1.bp.blogspot.com/-FismMPopJzs/UN303XaMrcI/AAAAAAAACs4/Ibc-J-rnWZI/s320/full_screen_packaged-app.png" style="margin-left: auto; margin-right: auto;" width="320" /></td></tr>
<tr><td class="tr-caption" style="text-align: center;">The Dart Editor "hello world" as a Chrome Packaged App</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-FismMPopJzs/UN303XaMrcI/AAAAAAAACs4/Ibc-J-rnWZI/s1600/full_screen_packaged-app.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-family: Arial, Helvetica, sans-serif;"></span></a></div>
</div>
<span style="font-family: Arial, Helvetica, sans-serif;"><span style="white-space: pre-wrap;">
</span></span>

<span style="white-space: pre-wrap;"><span id="internal-source-marker_0.29599912860430777" style="white-space: normal;"><span style="font-family: Arial; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">We’ll be using the standard Hello Dart app that appears when you select File &gt; New Application in the Dart Editor. &nbsp;My project name for this example is </span><span style="font-family: Courier New, Courier, monospace; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">hello_world</span><span style="font-family: Arial; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">, you can grab the <a href="https://github.com/Dartwatch/hello_world_packaged_app" target="_blank">source code from github</a>, or simply create a new Dart project called </span><span style="font-family: Courier New, Courier, monospace; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">hello_world</span><span style="font-family: Arial; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">.</span></span></span><br />
<span style="white-space: pre-wrap;"><span style="white-space: normal;"><span style="font-family: Arial; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"><br /></span></span></span>
<span style="white-space: pre-wrap;"><span style="white-space: normal;"><span style="font-family: Arial; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">To turn this into a chrome packaged app, you need to provide two extra files, and some icons for your app. &nbsp;</span><br /><span style="font-weight: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span></span><br /><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Arial; font-weight: normal;">The first extra file is an </span><span style="font-family: Arial; font-weight: bold;"><a href="http://developer.chrome.com/apps/manifest.html" target="_blank">application manifest file</a></span><span style="font-family: Arial; font-weight: normal;">, called </span><span style="font-family: Courier New, Courier, monospace; font-weight: normal;">manifest.json</span><span style="font-family: Arial; font-weight: normal;">, which provides a description of your app to chrome, including the permissions, icon files and background JavaScript file to run on launch. &nbsp;The second file is the </span><span style="font-family: Arial;"><b>background JavaScript script file</b>, in my example, called </span><span style="font-family: Courier New, Courier, monospace;">background.js</span><span style="font-weight: normal;"><span style="font-family: Arial;">. &nbsp;This background script file is loaded by Chrome and listens to the </span><span style="font-family: Courier New, Courier, monospace;">onLaunched()</span><span style="font-family: Arial;"> event, and navigates to your app’s start page - the normal Dart entry point html file, for example, </span><span style="font-family: Courier New, Courier, monospace;">hello_world.html</span><span style="font-family: Arial;">. &nbsp;This </span><span style="font-family: Courier New, Courier, monospace;">hello_world.html</span><span style="font-family: Arial;"> is the same html file that you would use to launch your app, whether it is a Dart app or a JavaScript app. &nbsp;The link between these files is shown in the image below.</span></span></span></span></span><br />
<span style="white-space: pre-wrap;"><b style="font-weight: normal; white-space: normal;"><span style="font-family: Arial; font-size: 12px; vertical-align: baseline; white-space: pre-wrap;"><br /></span></b></span>
<br />
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-xSkuC1BK0W4/UOAVsV2xmyI/AAAAAAAACtY/xLoPE2PNpmk/s1600/packaged_app_structure.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="640" src="http://3.bp.blogspot.com/-xSkuC1BK0W4/UOAVsV2xmyI/AAAAAAAACtY/xLoPE2PNpmk/s640/packaged_app_structure.png" width="558" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">How the packaged app files link into your Dart app</td></tr>
</tbody></table>
<span style="white-space: pre-wrap;"><b id="internal-source-marker_0.7770396345295012" style="font-weight: normal; white-space: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">For a chrome packaged app to run correctly, you need to provide all the files that the app needs to run offline, and this includes the </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;"><a href="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js" target="_blank">dart.js</a></span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"><a href="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js" target="_blank"> that is normally downloaded from googlecode</a>. &nbsp;&nbsp;For the chrome packaged app to work correctly, you need to download the dart.js file and copy it into your project (and update the script reference in the </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;">hello_world.html</span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> file.</span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">One final step with Dart is to convert the your Dart app to JavaScript using </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;"><a href="http://www.dartlang.org/docs/dart2js/" target="_blank">dart2js</a></span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">, but you need to use the flag </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;"><a href="http://dartbug.com/3436" target="_blank">--disallow-unsafe-eval</a></span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">, which prevents </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;">dart2js</span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> from creating JavaScript that calls </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;">eval()</span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> and creating functions dynamically (<a href="http://developer.chrome.com/apps/app_csp.html" target="_blank">which is not allowed in a chrome packaged app</a>, per Content Security Policy (CSP) rule). &nbsp;An example command line, from the </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;">/web/</span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> folder, could look like:</span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-family: 'Courier New'; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;dart2js ./hello_world.dart -ohello_world.dart.js --disallow-unsafe-eval</span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">This outputs the correct JavaScript for use by Chrome in your packaged app.</span></b></span><br />
<br />
<h2>
<span style="white-space: pre-wrap;"><b style="white-space: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">Installing a Packaged App from a local folder</span></b></span></h2>
<b style="font-weight: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">To install a packaged app that you are developing into Google chrome (in other words, not yet on the webstore), you have to turn on the extensions developer mode.</span></b><br />
<span style="white-space: pre-wrap;"><b style="white-space: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"><span style="font-weight: normal;">Navigate to the </span><a href="chrome://chrome/extensions/" style="font-weight: normal;">chrome://chrome/extensions/</a><span style="font-weight: normal;"> url and turn check “</span>Developer Mode<span style="font-weight: normal;">” - this lets you install packaged apps directly from your local file system - see the image below.</span></span></b></span><br />
<span style="white-space: pre-wrap;"><b style="font-weight: normal; white-space: normal;"><span style="font-family: Arial; font-size: 12px; vertical-align: baseline; white-space: pre-wrap;"><br /></span></b></span>
<br />
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-KDYVhZneKu4/UOAV8q_kGQI/AAAAAAAACtg/O-v3-CphAyw/s1600/extensions_developer_mode.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="166" src="http://2.bp.blogspot.com/-KDYVhZneKu4/UOAV8q_kGQI/AAAAAAAACtg/O-v3-CphAyw/s400/extensions_developer_mode.png" width="400" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Chrome extensions developer mode</td></tr>
</tbody></table>
<span style="white-space: pre-wrap;"><b id="internal-source-marker_0.7770396345295012" style="font-weight: normal; white-space: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">You can use the </span><span style="font-family: Arial; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">Load unpacked extension... </span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">option to browse to the folder containing the </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;">manifest.json</span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> file, and the app will be installed into Chrome from there. &nbsp;When you are happy with your app, you can </span><span style="font-family: Arial; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">Pack extension</span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> and upload it to the chrome webstore, like Kevin Morre’s Pop-pop-win.  As you edit your app, and regenerate the JavaScript using </span><span style="vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: Courier New, Courier, monospace;">dart2js</span></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">, hit the "reload" button against your app's entry in the chrome extensions page to have Chrome reload the app's sourcecode.</span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">Once running as a Chrome packaged app, your Dart app <a href="http://developer.chrome.com/apps/api_index.html" target="_blank">gets access to the chrome.* &nbsp;API namespace</a>. &nbsp;Check out <a href="https://github.com/financeCoding/chrome.dart" target="_blank">Adam Singer's project to build a set of Dart wrappers</a> that makes it easy to access this API in your Dart app.</span></b></span><br />
<span style="white-space: pre-wrap;"><b style="font-weight: normal; white-space: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"><br /></span></b></span>
<br />
<h2>
<span style="white-space: pre-wrap;"><span style="white-space: normal;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">References</span></span></span></h2>
<br />
<ul>
<li><span style="font-family: Arial;"><span style="white-space: pre-wrap;"><a href="http://developer.chrome.com/apps/about_apps.html" target="_blank">Chrome Packaged Apps on Google Developers site</a></span></span></li>
<li><span style="font-family: Arial;"><a href="http://dartbug.com/3436" target="_blank">Dart2js issue 3438 to comply with CSP</a>&nbsp;</span></li>
<li><span style="font-family: Arial;"><span style="white-space: pre-wrap;"><a href="https://github.com/dart-lang/pop-pop-win" target="_blank">Pop pop win sourcecode on github</a></span></span></li>
<li><span style="font-family: Arial;"><span style="white-space: pre-wrap;"><a href="https://chrome.google.com/webstore/detail/pop-pop-win/mbghebmoaofincenahdohhpkljnkbbcn" target="_blank">Pop pop win in the Chrome Webstore</a></span></span></li>
<li><span style="font-family: Arial;"><span style="white-space: pre-wrap;"><a href="https://github.com/financeCoding/chrome.dart" target="_blank">chrome.dart API project sourcecode on github</a></span></span></li>
<li><span style="font-family: Arial;"><span style="white-space: pre-wrap;"><a href="https://github.com/Dartwatch/hello_world_packaged_app" target="_blank">Hello World as a packaged app sourcecode on github</a></span></span></li>
</ul>
<div class="feedflare">
<a href="http://feeds.feedburner.com/~ff/Dartwatch?a=DlSzgpr7CoM:oNFPu2DH8is:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Dartwatch?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=DlSzgpr7CoM:oNFPu2DH8is:V_sGLiPBpWU"><img src="http://feeds.feedburner.com/~ff/Dartwatch?i=DlSzgpr7CoM:oNFPu2DH8is:V_sGLiPBpWU" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=DlSzgpr7CoM:oNFPu2DH8is:qj6IDK7rITs"><img src="http://feeds.feedburner.com/~ff/Dartwatch?d=qj6IDK7rITs" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=DlSzgpr7CoM:oNFPu2DH8is:63t7Ie-LG7Y"><img src="http://feeds.feedburner.com/~ff/Dartwatch?d=63t7Ie-LG7Y" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=DlSzgpr7CoM:oNFPu2DH8is:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Dartwatch?i=DlSzgpr7CoM:oNFPu2DH8is:F7zBnMyn0Lo" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Dartwatch/~4/DlSzgpr7CoM" height="1" width="1"/>
