---
title: 'First Look at Dart Mixins'
layout: post
tags:
    - dart
    - dartlang
category: seth-ladds-blog
published: '2013-03-25T21:34:00-07:00'

---

You can use <i>mixins</i> to help inject behavior into your classes without using inheritance. Use a mixin when you have shared functionality that doesn't fit well in a <i>is-a</i>&nbsp;relationship.<br /><div><br /></div><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://1.bp.blogspot.com/-k_PxdBf6fR4/UVEkgVmt_II/AAAAAAAAVbE/wEurF9mx0xc/s1600/5406671277_5d6d9329bb.jpg" /></div><div><br /><div><br /></div><div>Dart supports a basic form of <a href="http://www.dartlang.org/articles/mixins/">mixins</a> as of the M3 release in early 2013. The language designers expect to expand on mixins' abilities in future versions of the language.</div><div><br /></div><div>Surprisingly, you've been using the concept of a mixin all along. Dart considers a mixin as the <i>delta between a subclass and its superclass</i>. That is, every time you define an <i>is-a</i>&nbsp;relationship with the <i>extends</i>&nbsp;keyword, you are really defining a delta between the new class and its parent class. In other words, a subclass definition is like a mixin definition.</div><div><br /></div><div>Given that short description, it should come as no surprise that an abstract class (with a few restrictions) is itself a mixin. Here is an example of a Persistance mixin:</div><div><br /></div><div><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; width: 450.828125px;"><code style="word-wrap: normal;"> abstract class Persistence {  <br />  void save(String filename) {  <br />   print('saving the object as ${toJson()}');  <br />  }  <br />    <br />  void load(String filename) {  <br />   print('loading from $filename');  <br />  }  <br />    <br />  Object toJson();  <br /> }  </code></pre></div><div><br /></div><div>Restrictions on mixin definitions include:</div><div><ol><li>Must not declare a constructor</li><li>Superclass is Object</li><li>Contains no calls to super</li></ol><div>You can use the mixin with the <i>with</i>&nbsp;keyword. Here is an example:</div></div><div><br /></div><div><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; width: 450.828125px;"><code style="word-wrap: normal;"> abstract class Warrior extends Object <b>with Persistence</b> {  <br />  fight(Warrior other) {  <br />   // ...  <br />  }  <br /> }  <br />   <br /> class Ninja extends Warrior {  <br />  Map toJson() {  <br />   return {'throwing_stars': true};  <br />  }  <br /> }  <br />   <br /> class Zombie extends Warrior {  <br />  Map toJson() {  <br />   return {'eats_brains': true};  <br />  }  <br /> } </code></pre></div><div><br /></div><div>In the above example, both Ninja and Zombie extend from Warrior. This makes sense, they are both warriors, so the <i>is-a</i>&nbsp;relationship applies. All warriors can be persisted and loaded from a database, but this is purely behavior and the statement <i>Warrior is-a Persistence</i>&nbsp;simply doesn't make sense. Inheritance does not apply here, but we can use a mixin to inject the functionality.</div><div><br /></div><div><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; width: 450.828125px;"><code style="word-wrap: normal;"> main() {  <br />  var ninja = new Ninja();  <br />  ninja.save('warriors.txt');  <br />    <br />  var zombie = new Zombie();  <br />  zombie.save('warriors.txt');  <br /> }  </code></pre></div><div><br />A class that uses a mixin is also a member of the mixin's type:<br /><br /><br /><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; width: 450.828125px;"><code style="word-wrap: normal;"> print(ninja is Persistence); // true!  </code></pre><br /><br /></div><div>Mixins are fairly new to Dart, so they aren't widely deployed. We're curious to see how you use mixins. Let us know on the <a href="mailto:misc@dartlang.org">Dart mailing list</a>, and please <a href="http://dartbug.com/">file any bugs</a> you may encounter. Thanks!</div><div><br /></div><div><span style="font-size: x-small;">(Photo courtesy of&nbsp;<a href="http://www.flickr.com/photos/58871905@N03/5406671277/">http://www.flickr.com/photos/58871905@N03/5406671277/</a>)</span></div></div><img src="http://feeds.feedburner.com/~r/SethLaddsBlog/~4/L_PXcECc_WY" height="1" width="1"/>
