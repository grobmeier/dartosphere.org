---
title: 'RESTful CRUD APIs with AppEngine, Cloud Endpoints and Dart code generation.'
layout: post
tags: {  }
category: dartwatch
published: '2013-06-27T18:30:00+01:00'

---

Dart and Web UI is an ideal platform for writing single page web apps. &nbsp;These are typically made up of static files (html, css, js/dart) that are served up and execute and render in the browser. &nbsp;Once running, they make requests back to the server for data, treating the server as a datasource API. <br />
<br />
The combination of REST and JSON provides a great way for a server to expose an API to browser applications, and <a href="http://www.dartlang.org/articles/json-web-service/" target="_blank">Dart can easily access JSON web services</a>. <br />
<br />
I was looking for a way to serve my client-side Dart application, and find a way to add server-side persistence in a scalable and open way. &nbsp;AppEngine immediately sprang to mind.<br />
<br />
AppEngine <a href="https://code.google.com/p/googleappengine/issues/detail?id=6092" target="_blank">doesn't support server-side Dart</a> at the moment (guess: don't hold your breath until after Dart reaches v1.0), but:<br />
<br />
<br />
<ol>
<li>It does support Java, Python, Go and PHP. &nbsp;</li>
<li>You can generate a "Cloud Endpoints" from your Java classes to provide a RESTful JSON based CRUD API</li>
<li>The generated cloud endpoint implements Google's discovery API, and you can use the Dart discovery API client generator to generate a Dart pub package strongly typed to your CRUD API (thanks to the great work by Gerwin Sturm and Adam Singer).</li>
<li>You can use this generated Dart in the browser to seamlessly access the AppEngine API.&nbsp;</li>
</ol>
<br />
And that's what this blog post is about.<br />
<br />
I'm going to use Java, Eclipse and the <a href="https://developers.google.com/eclipse/" target="_blank">Google Eclipse Plugin</a>&nbsp;for the AppEngine bits, and you can <a href="http://life.scarygami.net/discovery/" target="_blank">definitely use Python to achieve the same thing</a> (I'm not sure about cloud endpoint support for Go or PHP yet).<br />
<br />
<h2>
Creating an AppEngine cloud endpoint&nbsp;</h2>
There are plenty of tutorials about how to create an AppEngine project in eclipse using the Google plugin, so I'm not going to repeat them here. &nbsp;Just follow the "Web Application Project" Wizard and uncheck the "Use GWT" option.<br />
<br />
Once you have a project, you can go ahead and create a class that you want to persist. &nbsp;In this example, it's a <span style="font-family: Courier New, Courier, monospace;">Message</span>&nbsp;class for a guestbook (in a retro Geocities way). &nbsp;The snippet below shows the basic class without all the getters and setters.<br />
<br />
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;"><span style="color: green;">// java</span>
<span style="color: blue;">public</span> <span style="color: blue;">class</span> <span style="color: #2b91af;">Message</span> {
  <span style="color: blue;">private</span> String id;
  <span style="color: blue;">private</span> String name;
  <span style="color: blue;">private</span> String messageText;</pre>
<pre style="line-height: 125%; margin: 0;"></pre>
<pre style="line-height: 125%; margin: 0;">  <span style="color: blue;">public</span> Message() { }</pre>
<pre style="line-height: 125%; margin: 0;"></pre>
<pre style="line-height: 125%; margin: 0;"><pre><span style="color: green;">  // snip getters and setters</span></pre>
}
</pre>
</div>
<!-- end -->

<br />
To make this message an AppEngine persistent object, we just need to add a couple of annotations, namely&nbsp;<span style="font-family: Courier New, Courier, monospace;">@Entity</span> and <span style="font-family: Courier New, Courier, monospace;">@Id</span>. &nbsp;I'm going to create my own ID values, but you can <a href="https://developers.google.com/appengine/docs/java/datastore/entities#auto_id_assign" target="_blank">autogenerate </a>them if you prefer.<br />
<br />
Our class now looks like this:<br />
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;"><span style="color: green;">// java</span>
@Entity
<span style="color: blue;">public</span> <span style="color: blue;">class</span> <span style="color: #2b91af;">Message</span> {
  @Id
  <span style="color: blue;">private</span> String id;
  <span style="color: blue;">private</span> String name;
  <span style="color: blue;">private</span> String messageText;

  <span style="color: blue;">public</span> Message() { }
 
  <span style="color: green;">// snip getters and setters</span>
}
</pre>
</div>
<!-- end -->

<br />
This is all we need to get a persistent server-side object. &nbsp;Now we use the code generator that comes with the Google Eclipse Plugin to create an appengine cloud endpoint. <br />
<br />
<ul>
<li>Right click your class and select "Create Cloud Endpoint Class" (as shown in the screenshot below)</li>
</ul>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-bo5qNBvnGvs/UcwACaKVRqI/AAAAAAAAJCc/TVAW7yrR7XI/s1600/03+create+endpoint+class.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="460" src="http://4.bp.blogspot.com/-bo5qNBvnGvs/UcwACaKVRqI/AAAAAAAAJCc/TVAW7yrR7XI/s640/03+create+endpoint+class.png" width="640" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Generating a Cloud Endpoint</td></tr>
</tbody></table>
<div>
That will create a couple of files. One for the data persistence side (<i>EMF.java</i>), and the other that exposes CRUD operations for the Message class (<i>MessageEndpoint.java</i>)</div>
<div>
<br /></div>
<div>
That's all there is to it!<br />
<br />
Lets start the local AppEngine and access our API. &nbsp;Run the project as a "Web Application" and that will start the local AppEngine server.</div>
<div>
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-ZB_Yc4N0YO8/UcwAtUyS3_I/AAAAAAAAJCk/cWqwMI92XRM/s1600/04+run.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="81" src="http://3.bp.blogspot.com/-ZB_Yc4N0YO8/UcwAtUyS3_I/AAAAAAAAJCk/cWqwMI92XRM/s320/04+run.png" width="320" /></a></div>
<div>
<br /></div>
<h2>
Accessing the API</h2>
<div>
There are a number of APIs exposed by appengine, and they live under the <span style="font-family: Courier New, Courier, monospace;">_ah/api</span> URL path. &nbsp;First up is the Discovery API, accessible via:</div>
<div>
<br /></div>
<div>
<a href="http://localhost:8888/_ah/api/discovery/v1/apis">http://localhost:8888/_ah/api/discovery/v1/apis</a></div>
<div>
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-tkjLfImsWcs/UcwBwfd3wxI/AAAAAAAAJC0/I5O_PE7_RaA/s1600/05+discovery.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-tkjLfImsWcs/UcwBwfd3wxI/AAAAAAAAJC0/I5O_PE7_RaA/s1600/05+discovery.png" /></a></div>
<div>
<br /></div>
<div>
<br /></div>
<div>
This exposes a list of all the REST APIs that our server is exposing. &nbsp;There is only one at present - the MessageEndpoint API. &nbsp; Let's discover that by navigating to:</div>
<div>
<br /></div>
<div>
<a href="http://localhost:8888/_ah/api/discovery/v1/apis/messageendpoint/v1/rest">http://localhost:8888/_ah/api/discovery/v1/<b>apis/messageendpoint/v1/rest</b></a>&nbsp;(referenced by the "<span style="font-family: Courier New, Courier, monospace;">discoveryLink</span>" field. &nbsp;That returns a host of information about the message endpoint API:</div>
<div>
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-gIgWezw07Oo/UcwCJk6qVLI/AAAAAAAAJC8/d2ZA15DDKUg/s1600/06+api+discovery.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-gIgWezw07Oo/UcwCJk6qVLI/AAAAAAAAJC8/d2ZA15DDKUg/s1600/06+api+discovery.png" /></a></div>
<div>
<br /></div>
<div>
This JSON contains all the information needed to code generate strongly typed code for accessing the API. &nbsp;Key parts include our <span style="font-family: Courier New, Courier, monospace;">Message</span> class definition:</div>
<div>
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;">    <span style="color: #a31515;">"Message"</span> <span style="border: 1px solid #FF0000;">:</span> {
      "id" : <span style="color: #a31515;">"Message"</span>,
      "type" : <span style="color: #a31515;">"object"</span>,
      "properties" : {
        "id" : {
          "type" : <span style="color: #a31515;">"string"</span>
        },
        "messageText" : {
          "type" : <span style="color: #a31515;">"string"</span>
        },
        "name" : {
          "type" : <span style="color: #a31515;">"string"</span>
        }
      }
</pre>
</div>
<br />
and CRUD operations you can perform on it, such as <span style="font-family: Courier New, Courier, monospace;">getMessage</span>, by using a <span style="font-family: Courier New, Courier, monospace;">GET</span> request to <span style="font-family: Courier New, Courier, monospace;">message/{id}</span></div>
<div>
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;">   <span style="color: #a31515;">"getMessage"</span> <span style="border: 1px solid #FF0000;">:</span> {
      "id" : <span style="color: #a31515;">"messageendpoint.getMessage"</span>,
      "path" : <span style="color: #a31515;">"message/{id}"</span>,
      "httpMethod" : <span style="color: #a31515;">"GET"</span>,
      "parameters" : {
        "id" : {
          "type" : <span style="color: #a31515;">"string"</span>,
          "required" : <span style="color: blue;">true</span>,
          "location" : <span style="color: #a31515;">"path"</span>
        }
      },
      "parameterOrder" : [ <span style="color: #a31515;">"id"</span> ],
      "response" : {
        "$ref" : <span style="color: #a31515;">"Message"</span>
      }
    }
</pre>
</div>
<!-- end -->
</div>
<br />
The complete list of operations are: <br />
<ul>
<li>getMessage =&gt; <span style="font-family: Courier New, Courier, monospace;">GET: /message/{id}</span></li>
<li>insertMessage =&gt; <span style="font-family: Courier New, Courier, monospace;">POST: message/</span></li>
<li>listMessage =&gt; <span style="font-family: Courier New, Courier, monospace;">GET: message/</span></li>
<li>removeMessage =&gt;&nbsp;<span style="font-family: Courier New, Courier, monospace;">DELETE: message/{id}</span></li>
<li>updateMessage =&gt; <span style="font-family: Courier New, Courier, monospace;">PUT: message</span></li>
</ul>
<br />
We can try that by using the command line CURL command to try POSTing some data to insert a message, and GET the list of messages:<br />
<br />
The following curl command POSTs some JSON data to the URL provided (all one line)<br />
<blockquote class="tr_bq">
<span style="font-family: Courier New, Courier, monospace;">curl --header "Content-Type:application/json" --data </span><span style="font-family: 'Courier New', Courier, monospace;">"{'id':'msg1','name':'Chris','messageText':'Awesome Guestbook'}" http://localhost:8888/_ah/api/messageendpoint/message</span></blockquote>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-n7Im-Y5UUfk/UcwFlMg6x0I/AAAAAAAAJDM/JDfTm0DT9jQ/s1600/08+insert.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="97" src="http://2.bp.blogspot.com/-n7Im-Y5UUfk/UcwFlMg6x0I/AAAAAAAAJDM/JDfTm0DT9jQ/s640/08+insert.png" width="640" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Output of CURL POST command</td></tr>
</tbody></table>
I've inserted a couple of messages, with IDs "msg1" and "msg2". &nbsp;We can list these with a simple GET request:<br />
<br />
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-5cqzKJOhyJQ/UcwF1WeLHaI/AAAAAAAAJDU/D-0B71RkVpI/s1600/09+two+items.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-5cqzKJOhyJQ/UcwF1WeLHaI/AAAAAAAAJDU/D-0B71RkVpI/s1600/09+two+items.png" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">GETting the list of messages</td></tr>
</tbody></table>
<br />
Now we're ready to hook AppEngine up with Dart.<br />
<h2>
Using the Dart Discovery API Client Generator</h2>
<div>
<a href="https://developers.google.com/experts/members/" target="_blank">Google Developer Experts</a> Adam Singer and Gerwin Sturm spent some time earlier in the year building a code generation tool to build Dart packages from Google APIs using the Google's discovery APIs. &nbsp;We're going to use that now. &nbsp;The next part of this blog assumes that you have <span style="font-family: Courier New, Courier, monospace;">dart</span> and <span style="font-family: Courier New, Courier, monospace;">git</span> on your path (accessible from the command line).</div>
<div>
<br /></div>
<div>
First, we need to get the generator code, so we'll <a href="https://github.com/dart-gde/discovery_api_dart_client_generator" target="_blank">clone it from github</a> by running the following command:</div>
<div>
<br /></div>
<blockquote class="tr_bq">
<span style="font-family: Courier New, Courier, monospace; font-size: x-small;">git clone https://github.com/dart-gde/discovery_api_dart_client_generator.git</span></blockquote>
Now you can run the <span style="font-family: Courier New, Courier, monospace;">generate.dart</span>, passing in the URL of the discovery API for the messageendpoint:<br />
<br />
<blockquote class="tr_bq">
<span style="font-size: x-small;"><span style="font-family: Courier New, Courier, monospace;">cd discovery_api_dart_client_generator&nbsp;</span>&nbsp;</span></blockquote>
<blockquote class="tr_bq">
<span style="font-family: Courier New, Courier, monospace; font-size: x-small;">dart bin\generate.dart -u&nbsp;</span><br />
<a href="http://localhost:8888/_ah/api/discovery/v1/apis/messageendpoint/v1/rest"><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">http://localhost:8888/_ah/api/discovery/v1/<b>apis/messageendpoint/v1/rest</b></span></a></blockquote>
This outputs a Dart pub package in the <span style="font-family: Courier New, Courier, monospace;">output/dart_messageendpoint_v1_api_client</span> subfolder. &nbsp;We can import that into a Dart project.<br />
<br />
<h2>
Using the generated pub package in a Dart project.</h2>
We need to jump through a couple of hoops now, as we need to host the client-side Dart files within the AppEngine server. &nbsp;AppEngine serves files from the /war folder within the Java project, and you can get your Dart files in there in a number of ways, for example, exporting a folder via the Java classpath output, symlinking directly within the war folder, or adding a build step to <span style="font-family: Courier New, Courier, monospace;">pub deploy</span> the files into the war folder.<br />
<br />
For the sake of ease with this demo, though, I'm just going to go right ahead and create a new Dart web project right inside the /war folder. &nbsp;Typically, you'd want to only include the output of <span style="font-family: Courier New, Courier, monospace;">pub deploy</span>, though.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-DFdyjT4FOQ0/UcwKM8zVqtI/AAAAAAAAJDk/lYrrNmIjjac/s1600/create_client.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="386" src="http://1.bp.blogspot.com/-DFdyjT4FOQ0/UcwKM8zVqtI/AAAAAAAAJDk/lYrrNmIjjac/s400/create_client.png" width="400" /></a></div>
<br />
Now that we've got a Dart project, let's check that we can access it through appengine, via the url:&nbsp;<a href="http://localhost:8888/client/web/client.html">http://localhost:8888/client/web/client.html</a>&nbsp;- if you're checking that URL in chromium, it won't do much because we've not generated the dart2js code yet. <br />
<br />
In the Dart editor, let's create a launch that uses the appengine server instead of the built in Dart server. &nbsp;That way it will run in Dartium, connect to the debugger, but be served from appengine:<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-Eq6byuIH5Mc/UcwK-HV4sJI/AAAAAAAAJDs/XNosjmAz7Ko/s1600/appengine+launch.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="330" src="http://3.bp.blogspot.com/-Eq6byuIH5Mc/UcwK-HV4sJI/AAAAAAAAJDs/XNosjmAz7Ko/s400/appengine+launch.png" width="400" /></a></div>
<br />
Now that we can launch our app from the Dart Editor, into Dartium, served from AppEngine, let's look at accessing our new API.<br />
<br />
Edit the pubspec.yaml to add the generated pub package. &nbsp;I'm using a path url (which hard codes this app to my machine). &nbsp;In the real world, you'd be better using a git location, so that you can share development among your team.<br />
<br />
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;">name: client
description: A sample web application
dependencies:
  browser: any
  google_messageendpoint_v1_api:
    path: c:\work\dart\projects\discovery_api_dart_client_generator\output\dart_messageendpoint_v1_api_client
</pre>
</div>
<!-- end -->

<br />
Run a pub install if it's not run already, and you should get the package installed:<br />
<br />
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-_Xh-2-Eyfxc/UcwL2zkD6pI/AAAAAAAAJD8/fvKprjV5n4w/s1600/installed+package.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://4.bp.blogspot.com/-_Xh-2-Eyfxc/UcwL2zkD6pI/AAAAAAAAJD8/fvKprjV5n4w/s320/installed+package.png" width="203" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Installed endpoint package</td></tr>
</tbody></table>
In the screenshot above, you can see that there are three libraries created: <span style="font-family: Courier New, Courier, monospace;">browser</span>, <span style="font-family: Courier New, Courier, monospace;">client</span> and <span style="font-family: Courier New, Courier, monospace;">console</span>. &nbsp;The <span style="font-family: Courier New, Courier, monospace;">client</span>&nbsp;library is shared between <span style="font-family: Courier New, Courier, monospace;">browser</span> and <span style="font-family: Courier New, Courier, monospace;">console</span> (which expose the relevant dart:html or dart:io APIs and re-export <span style="font-family: Courier New, Courier, monospace;">client</span>). &nbsp;Because we're working in the browser, we'll need to import the <span style="font-family: Courier New, Courier, monospace;">browser</span> package using the following line:<br />
<br />
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;"><span style="color: blue;">import</span> <span style="color: #a31515;">'package:google_messageendpoint_v1_api/messageendpoint_v1_api_browser.dart'</span>;
</pre>
</div>
<!-- end -->

<br />
We can now reference our Message class. &nbsp;Let's write some simple code to create a message, and then retrieve a list of message objects. &nbsp;This is going to output (using print()) to the browser console. &nbsp;We're not building a UI here (that is left for a later blog post). <br />
<br />
First, we create an instance of the endpoint class and set the root URL. &nbsp;Remember those 5 CRUD methods on the API from earlier? &nbsp;We also get great autocomplete from that:<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-MTc9615swDk/UcwPAnCeNyI/AAAAAAAAJEY/AeRbfM2Dy54/s1600/endpoint+autocomplete.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-MTc9615swDk/UcwPAnCeNyI/AAAAAAAAJEY/AeRbfM2Dy54/s1600/endpoint+autocomplete.png" /></a></div>
<br />
Let's try listing the messages, which performs the same GET that we used with the CURL command earlier:<br />
<br />
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;"><span style="color: blue;">import</span> <span style="color: #a31515;">'dart:html'</span>;
<span style="color: blue;">import</span> <span style="color: #a31515;">'package:google_messageendpoint_v1_api/messageendpoint_v1_api_browser.dart'</span>;

<span style="color: #2b91af;">void</span> main() {
  <span style="color: green;">// create an instance of the endpoint</span>
  Messageendpoint endpoint = <span style="color: blue;">new</span> Messageendpoint();
  endpoint.rootUrl = <span style="color: #a31515;">"http://localhost:8888/"</span>; <span style="color: green;">// set the root URL</span>
  
  endpoint.listMessage().then((CollectionResponse_Message messageCollection) {
    print(messageCollection.items); // <span style="color: green;">GET : message/</span></pre>
<pre style="line-height: 125%; margin: 0;">    print(messageCollection.items[0].messageText); // <span style="color: green; line-height: 125%;">"Awesome Guestbook"</span><span style="line-height: 125%;"> </span>
  });
}
</pre>
</div>
<!-- end -->

<br />
<br />
Let's try adding a new message, saving it back to the server, and retrieving it by ID:<br />
<br />
<!-- HTML generated using hilite.me --><br />
<div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;">
<pre style="line-height: 125%; margin: 0;">  <span style="color: green;">// create a message</span>
  <span style="color: blue;">var</span> message = <span style="color: blue;">new</span> Message.fromJson({});
  message.id = <span style="color: #a31515;">"msg3"</span>;
  message.messageText = <span style="color: #a31515;">"I am a message"</span>;
  message.name = <span style="color: #a31515;">"Chris"</span>;
  
  <span style="color: green;">// save it back to the server</span>
  endpoint.insertMessage(message).then((Message savedMessage) {    
    <span style="color: green;">// message is saved.  Retrieve it by ID</span>
    endpoint.getMessage(<span style="color: #a31515;">"msg3"</span>).then((Message loadedMessage) {
      print(loadedMessage.messageText); <span style="color: green;">// "I am a message "</span>
    });
  });
</pre>
</div>
<!-- end -->

<br />
<h2>
Summary</h2>
For now, that's it. &nbsp; In this blog post you've seen how to<br />
<br />
<ul>
<li>create a persistent Java class on AppEngine,&nbsp;</li>
<li>generate a cloud endpoint to expose the Java class CRUD as a RESTful API</li>
<li>use the discovery API to generate a Dart pub package strongly typed to the Java class</li>
<li>use the generated pub package to read and write to the API.</li>
</ul>
<br />
There's a lot more that you can do with the discovery API and the code generated Dart, including adding OAuth tokens to authenticate requests, or setting the quota user and IP to enforce per-user limits.<br />
<br />
You can find a whole host of generated APIs for most of the public google services <a href="https://github.com/dart-google-apis" target="_blank">on github</a>, but I think the most powerful feature is being able to generate APIs for your own appengine apps.<br />
<h2>
References &amp; further reading</h2>
<ul>
<li><a href="https://developers.google.com/appengine/docs/java/endpoints/" target="_blank">Cloud Endpoint Docs on Google.com</a></li>
<li><a href="https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore" target="_blank">Using the DataStore</a></li>
<li><a href="http://life.scarygami.net/discovery/" target="_blank">Gerwin Sturms blog post on the Discovery API</a></li>
<li><a href="https://developers.google.com/eclipse/" target="_blank">Google Plugin for Eclipse</a></li>
</ul>
<div class="feedflare">
<a href="http://feeds.feedburner.com/~ff/Dartwatch?a=GyVuXdd8fZM:h2kW8KRrLcM:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Dartwatch?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=GyVuXdd8fZM:h2kW8KRrLcM:V_sGLiPBpWU"><img src="http://feeds.feedburner.com/~ff/Dartwatch?i=GyVuXdd8fZM:h2kW8KRrLcM:V_sGLiPBpWU" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=GyVuXdd8fZM:h2kW8KRrLcM:qj6IDK7rITs"><img src="http://feeds.feedburner.com/~ff/Dartwatch?d=qj6IDK7rITs" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=GyVuXdd8fZM:h2kW8KRrLcM:63t7Ie-LG7Y"><img src="http://feeds.feedburner.com/~ff/Dartwatch?d=63t7Ie-LG7Y" border="0"></img></a> <a href="http://feeds.feedburner.com/~ff/Dartwatch?a=GyVuXdd8fZM:h2kW8KRrLcM:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Dartwatch?i=GyVuXdd8fZM:h2kW8KRrLcM:F7zBnMyn0Lo" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Dartwatch/~4/GyVuXdd8fZM" height="1" width="1"/>
