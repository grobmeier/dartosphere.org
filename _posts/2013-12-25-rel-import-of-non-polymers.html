---
title: 'Rel Import of Non Polymers'
layout: post
tags:
    - chain
    - dart
    - dartlang
    - i18n
    - polymer
category: japhr-by-chris-strom
published: '2013-12-25T23:58:00-05:00'

---

<div class=top-chain-links></div><br />I still need a way to internationalize <a href="http://www.polymer-project.org/">Polymer</a>. As I found last night, the <a href="http://dartlang.org">Dart</a> <code>intl</code> package is likely to be of little use. Although the code generation is interesting, it seems prohibitively difficult for a web developer who just wants to use a nifty custom Polymer element. Besides, it is just a Dart solution and I need something that will work in both <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a> and in the JavaScript version of Polymer. That said, I do like many of the <code>intl</code> features—especially pluralization and date formatting—so I do not want to totally disregard it.<br /><br />My thought for tonight is that it might be nice for a localized Polymer element to automatically detect localization (either in code or JSON format). That is, an element that looks like:<pre class="prettyprint">&lt;hello-you locale="fr">&lt;/hello-you></pre>Would default to French unless the observed <code>locale</code> attribute changes to another <i>supported</i> locale. And the list of supported locales could be specified by the web developer via <code>&lt;link></code> tags:<pre class="prettyprint"><code>    &lt;link rel="import" href="packages/i18n_example/hello-you.html"><br />    &lt;link rel="import" href="packages/i18n_example/hello-you-en.json"><br />    &lt;link rel="import" href="packages/i18n_example/hello-you-fr.json"><br />    &lt;link rel="import" href="packages/i18n_example/hello-you-es.json"></code></pre>I have absolutely no idea how feasible that is, but there is, as they say one way to find out. The question for tonight is, does Polymer allow me to import non-Polymers via the <code>&lt;link></code> tags?<br /><br />The answer, at least in Dart, seems to be “no.” After creating those files and adding them as <code>&lt;link></code> tags to the document's <code>&lt;head></code> tag, I have something like:<pre class="prettyprint"><code>  &lt;head><br />    &lt;title>Polymer i18n&lt;/title><br />    &lt;link type="text/css" rel="stylesheet" href="assets/i18n_example/bootstrap.min.css"><br /><br />    &lt;!-- Load component(s) --><br /><b>    &lt;link rel="import" href="packages/i18n_example/hello-you.html"><br />    &lt;link rel="import" href="packages/i18n_example/hello-you-en.json"><br />    &lt;link rel="import" href="packages/i18n_example/hello-you-fr.json"><br />    &lt;link rel="import" href="packages/i18n_example/hello-you-es.json"></b><br />    &lt;!-- Load Polymer --><br />    &lt;script type="application/dart"><br />      export 'package:polymer/init.dart';<br />    &lt;/script><br />  &lt;/head></code></pre>But when I load the web page from <code>pub serve</code>, I am left with:<pre class="prettyprint"><code>  &lt;head><br />    &lt;!-- Polymer.dart JS helpers --><br />    &lt;title>Polymer i18n&lt;/title><br />    &lt;link type="text/css" rel="stylesheet" href="assets/i18n_example/bootstrap.min.css"><br /><br />    &lt;!-- START: load --><br />    &lt;!-- Load component(s) --><br />    <br />    <br />    <br />    <br />    &lt;!-- Load Polymer --><br />    &lt;script type="application/dart" src="index.html_bootstrap.dart">&lt;/script><br />    &lt;!-- END: load --<br />  &lt;/head></code></pre>All of my JSON localizations are gone. And, unlike the Polymers, they are not showing up in the network tab of my browser. This is the work of the Polymer transformer that I have specified in my <code>pubspec.yaml</code>:<pre class="prettyprint">name: i18n_example<br />dependencies:<br />  polymer: any<br /><b>transformers:<br />- polymer:<br />    entry_points: web/index.html</b></pre>But I rather need that.<br /><br />At this point the question becomes: should Polymer.dart allow non-Polymer imports this?<br /><br />To answer that, I re-implement my Polymer in JavaScript, load things and find that yes, the JSON <code>&lt;link></code> tags are loaded in the network tab (even in Internet Explorer 10, so it does seem like Polymer does this). Furthermore, the imported JSON is available programmatically:<pre class="prettyprint">> el = document.querySelectorAll('link')[3].import<br />Object {href: "http://localhost:8000/scripts/hello-you-fr.json", ownerNode: b, content: b}<br />> el.content.textContent<br />"import{<br />  'hello': 'Bonjour',<br />  'done': 'Fin',<br />  'how_many': 'Combien?',<br />  'instructions': 'Présentez-vous une expérience personnalisée incroyable!'<br />}<br />"</pre>Unfortunately, this does me little immediate good since Polymer.dart is in seeming disagreement with its JavaScript sibling. Still, an approach that imports localizations seems to be possible—at least on the surface. I will dig in a little deeper tomorrow with the JavaScript version and then circle back to the Dart to see if there is anyway to cajole it into supporting non-Polymer <code>&lt;link></code> imports.<br /><br /><br /><span style="color: #ccc">Day #976</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2013/12/code-generation-and-polymer-i18n.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <span style="color: #ccc">next&rsaquo;</span> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script>
