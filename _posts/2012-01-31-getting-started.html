---
title: 'Getting Started'
layout: post
tags:
    - Dart
    - dartlang
    - TDD
category: test-driven-dart-development
published: '2012-01-31T14:35:00-04:00'

---

I decided to check out a new development language recently called Dart. I must say that there is plenty of excitement surrounding this effort by Google, and I am finding myself drawn to the language.<br /><br />Most of my background is developing in a structured language, Java in my case, and I have gotten used to using enterprise tools and technologies to help me and my team deliver a quality product.<br /><br />My goal with this blog is to help support the Dart initiative, and to provide a way for developers coming from a Java background (or any background) to more easily adopt Dart as another tool in their web development efforts. There should be plenty here for anyone wanting to learn Dart, regardless of their background.<br /><br />I will try to choose topics that I feel have helped me the most in adopting the language, and I will attempt to draw similarities and contrasts with Java.<br /><br />Before I get started, I also want to point out that Google has released this language at a very early stage, so you should lower your expectations early on and take an opportunity to make the language as good as it can be by providing feedback to the Dart team. I have found that the Dart team, and the community that has grown from their efforts, have been terrific in addressing any questions or issues that I have had.<br /><br />From the title of this blog, you can probably tell that I subscribe to the proven approach described as Test Driven Development. My intention is not to debate the merits of TDD, but I am hopeful that those of you who have never tried this approach will see some benefit in such an approach. Particularly when it comes to web development, which has not typically lent itself well to this type of approach.<br /><br />I will begin my series by covering the basics of setting up a development environment, in particular for the benefit of those who would like to follow along with some of the code samples. I will base this series on a Windows environment, mainly because I am seeing a great deal of&nbsp;Linux&nbsp;and Apple based Dart material out there already. In addition to this, I will be encouraging you to download the binaries, not because it is not fun compiling for hours, but because it will get you up and running quickly.<br /><br /><span style="font-size: large;">Download Resources</span><br />The current version I am using for my development environment is build 3331. You can find the same <a href="http://gsdview.appspot.com/dart-editor-archive-integration/3331/">files </a>here. You should see a list of files something like the following.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-7k9gWkh2JOM/TxYfxzpnhyI/AAAAAAAABbI/SrBSeD7DaE8/s1600/sourceFiles.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="167" src="http://3.bp.blogspot.com/-7k9gWkh2JOM/TxYfxzpnhyI/AAAAAAAABbI/SrBSeD7DaE8/s320/sourceFiles.PNG" width="320" /></a></div><br />I have highlighted the specific files that I use in my environment. If you extract both files to a directory of your choosing on your computer, the directory structure will look something like this.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-kWEMyM57faM/TxYhI9eQGrI/AAAAAAAABbQ/eIYpv9SmQwY/s1600/gettingStarted1.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="37" src="http://1.bp.blogspot.com/-kWEMyM57faM/TxYhI9eQGrI/AAAAAAAABbQ/eIYpv9SmQwY/s320/gettingStarted1.PNG" width="320" /></a></div><br />The folder labeled 'dart' (&lt;DART_EDITOR_HOME&gt;) contains an editor for you to develop your applications, based on the popular Eclipse platform. Some of the features I have grown to really like are not implemented yet, but as mentioned, it is still early, and the editor is constantly improving.<br /><br />The other folder contains the Dart runtime files that includes the Dart executable as well as a compiler written in Dart called frogc. We will use these files occasionally, so it is good to have them in a known location early on.<br /><br />I would suggest that you follow the convention as set out by the Dart team, to use your home folder as the starting point, and create a directory called dart your home directory. In here, I keep all of my projects that get created in the editor. This way, I can use different builds of Dart, but always be pointing to the same directory for source code. There are other things that I prefer to do in my environment, but I will leave that out for now.<br /><br />As long as you have a recent version of Java installed and recognized on your OS, you can navigate to&nbsp; &lt;DART_EDITOR_HOME&gt;&nbsp;, and execute DartEditor.exe. Here is what you should see.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Is-ps5CBx5w/TxYk0Y4_-zI/AAAAAAAABbg/TU4mx5tuUWk/s1600/gettingStarted3.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="http://1.bp.blogspot.com/-Is-ps5CBx5w/TxYk0Y4_-zI/AAAAAAAABbg/TU4mx5tuUWk/s320/gettingStarted3.PNG" width="320" /></a></div><br /><br />I was fortunate to find an article on Unit Testing with Dart, and I have used this <a href="https://docs.google.com/document/pub?id=1A3O34aghr44umPA7fc9YGvFAHTYQFVCCRjcLCM6Yaw8&amp;pli=1">article </a>as a starting point for my unit testing. Use the same libraries I am using by downloading this <a href="https://docs.google.com/open?id=0B-Tym-1BuWguYWYxMmZlZGItMzM3MS00ZjE0LWJkNGUtOTJlNjYzZDIwNjk3">file</a>, and extracting to your home\dart directory.<br /><br /><span style="font-size: large;">Create a Simple Demo using TDD</span><br /><br />One of the principles of TDD is to write a test first and watch it fail. I will create a project that represents a sample application, and a second application for testing that sample app.<br /><br />In the Dart editor, click File &gt; New Application.&nbsp;Fill-in&nbsp;as shown here.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-1YPhgWVhLrU/TxYshV-nC8I/AAAAAAAABbo/3WSsdyymUas/s1600/gettingStarted4.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://1.bp.blogspot.com/-1YPhgWVhLrU/TxYshV-nC8I/AAAAAAAABbo/3WSsdyymUas/s320/gettingStarted4.PNG" width="298" /></a></div><br />Click Finish, and you will have a skeleton application that technically can be run directly, but that is not what we want here. What I would like is to create a sample library and test that library.<br /><br />Replace what is in the editor window with one statement as follows.<br /><br />#library('calculator');<br /><br />Save the file.<br /><br />Notice that the Libraries view now has an icon labelled 'calculator', indicating that there is now a library with that name.<br /><br />Now right-click on the package labelled 'calculator', and choose New File. Fill-in as shown here.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-tl8Kw5xhIMM/TxYvi2Xj2VI/AAAAAAAABbw/7_kcRs2BVgs/s1600/gettingStarted5.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="317" src="http://4.bp.blogspot.com/-tl8Kw5xhIMM/TxYvi2Xj2VI/AAAAAAAABbw/7_kcRs2BVgs/s320/gettingStarted5.PNG" width="320" /></a></div><br />A new class file will be in the editor window, with only a class definition. This class declaration is identical to how a class would be declared in java, except that the source file ends in a .dart extension.<br /><br />Select the original source file labelled MySampleApplication.dart, and you will notice that the editor has already added a new entry for the source file just created.<br /><br />Repeat the steps just performed so that there is another source file called addition.dart. Make a small change to the addition and subtraction class definitions such that the class declarations begin with a Capital letter. This will not require, unlike&nbsp;Java, that the source file name be changed.<br /><br />So, all that we have at this time in out primary source file for our library are these 3 lines.<br /><br /><br /><pre style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code><br />#library('calculator');<br /><br />#source('subtraction.dart');<br /><br />#source('addition.dart');<br /></code><br /></pre><br />So far, so good. Now lets write some tests!<br /><br />Create a new application and fill-in as follows.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-4tqEDYchhWs/TxYxufTr84I/AAAAAAAABb4/UjkR1215f70/s1600/gettingStarted6.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://1.bp.blogspot.com/-4tqEDYchhWs/TxYxufTr84I/AAAAAAAABb4/UjkR1215f70/s320/gettingStarted6.PNG" width="299" /></a></div><br />Notice we are choosing 'Web' this time, because the testing framework is graphical.<br /><br />Change the string text 'hello World!' with 'MySampleApplication Test Suite!'. As a sanity check, save all (and wait for compiling to finish) and click Tools &gt; Run in Browser. If your default browser is not currently Chrome, copy the url that is displayed in your default browser, and paste it into Chrome. For this series, I will assume Chrome as your browser.<br /><br />You should see something like this.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-21aZ9QtHFzE/TxYzJIHoLSI/AAAAAAAABcA/QDj6_xvrSXg/s1600/gettingStarted7.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="118" src="http://1.bp.blogspot.com/-21aZ9QtHFzE/TxYzJIHoLSI/AAAAAAAABcA/QDj6_xvrSXg/s320/gettingStarted7.PNG" width="320" /></a></div>Not very interesting yet, but we are making&nbsp;progress.<br /><br />Add the following statement as the second line in the TestMySampleApplication.dart file.<br /><br />#import('../MySampleApplication/MySampleApplication.dart');<br /><br />This is all that is required to expose the class Addition and Subtraction.<br /><br />Now add 2 additional lines as shown here.<br /><br /><br />#import('../testing/unittest/unittest_dartest.dart');<br />#import('../testing/dartest/dartest.dart');<br /><br />Also, after the last line in the main method, add this line.<br /><br />new DARTest().run();<br /><br />Save all files and wait for the build to finish (done automatically). Go back to the Chrome browser window you had open previously and press F5 or click refresh.<br /><br />You will now see something like.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-uyU-hqRuR-8/TxY1q-knp9I/AAAAAAAABcI/k4lnTU-Ou3w/s1600/gettingStarted8.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="250" src="http://3.bp.blogspot.com/-uyU-hqRuR-8/TxY1q-knp9I/AAAAAAAABcI/k4lnTU-Ou3w/s320/gettingStarted8.PNG" width="320" /></a></div><br />As you can see, there is now a console that appears, allowing you to run unit tests. We have no unit tests at the moment, but that can't last long! :)<br /><br /><span style="font-size: large;">Write a Test and Watch it Fail!</span><br /><br />In my very simple scenario here, we have a use case where a client of our library would like to call a method/function that accepts 2&nbsp;parameters&nbsp;of type int and returns a value of type int that&nbsp;represents&nbsp;the sum of the 2 parameters passed in. (I will not debate the merits of&nbsp;statically&nbsp;typed and dynamically typed languages. Not now anyway. )<br /><br />To write a test, we need to define a new method/function, and we will call it simpleTests().<br /><br />Immediately after the main method definition, define the function called simpleTests(). In that function, define a nested function called setupData(), followed by a nested function called group() that accepts a String and an anonymous function for parameters. In the anonymous function, define a function called test() that accepts a String and&nbsp;another&nbsp;anonymous function for parameters.<br /><br />It should look like this if you were following along.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-G9B7_7jjGeo/TxY5ruZ6jII/AAAAAAAABcQ/8FIV4II5hVg/s1600/gettingStarted9.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="136" src="http://3.bp.blogspot.com/-G9B7_7jjGeo/TxY5ruZ6jII/AAAAAAAABcQ/8FIV4II5hVg/s320/gettingStarted9.PNG" width="320" /></a></div><br /><br />That is not very interesting yet, so we will add some additional code that actually exercises something.<br /><br />The first test we want to write will be to test a function called 'add()'. Here is what we start with.<br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-w5kUUJuIlws/TxY_TjHBcCI/AAAAAAAABco/pmqdfDt3I5s/s1600/gettingStarted10r.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="159" src="http://2.bp.blogspot.com/-w5kUUJuIlws/TxY_TjHBcCI/AAAAAAAABco/pmqdfDt3I5s/s320/gettingStarted10r.PNG" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"></div><br />Naturally, the editor complains because the add() function does not exist, so following TDD, we will satisfy the compiler by adding a static method called add to the Addition class as shown here.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-bOkDD5P64Zw/TxY9KYQPiAI/AAAAAAAABcg/O_t2Ku3lz9M/s1600/gettingStarted11.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="86" src="http://1.bp.blogspot.com/-bOkDD5P64Zw/TxY9KYQPiAI/AAAAAAAABcg/O_t2Ku3lz9M/s320/gettingStarted11.PNG" width="320" /></a></div><br />This allows us to compile, in spite of the fact that we did not provide any implementation to the add function.<br /><br />Add a new call to the function simpleTests(); in the main method, just before the call to&nbsp;new DARTest().run();<br /><br />If we save all files and look at our application in the chrome browser, we will now see that there is a test. Click the button with the right arrow to run the test listed. You will see something like this.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-gvf46mSMVEc/TxZBMGV0TyI/AAAAAAAABcw/Nhg0A7Kpuxw/s1600/gettingStarted12.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="239" src="http://3.bp.blogspot.com/-gvf46mSMVEc/TxZBMGV0TyI/AAAAAAAABcw/Nhg0A7Kpuxw/s320/gettingStarted12.PNG" width="320" /></a></div><br /><br />Great work!! We got it to fail.<br /><br />Now lets change the implementation so that our test passes.<br /><br />If we provide the simplest code that will get the code to work, then we may have something like this.<br /><br />return operand1 + operand2;<br /><br />Save, wait for compile and refresh our page. Click the right arrow to execute the tests. We will see this.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-3koa-V3unFg/TxZCFFnsMhI/AAAAAAAABc4/Jwndu6FskAE/s1600/gettingStarted13.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="239" src="http://3.bp.blogspot.com/-3koa-V3unFg/TxZCFFnsMhI/AAAAAAAABc4/Jwndu6FskAE/s320/gettingStarted13.PNG" width="320" /></a></div><br />Now that we have this simple function behaving as we would expect it to in this test, we can&nbsp;re-factor&nbsp;the code knowing that running this test again will ensure that we know if and when we break the code.<br /><br />I admit that this is a very simple example, but now that we have a grasp of our environment and how to&nbsp;set-up&nbsp;tests, we will continue in the next series with testing a more real application that most can relate to.<br /><br /><br /><br />
