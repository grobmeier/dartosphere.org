---
title: 'An Approach to Illiterate Programming: doc-code-merge'
layout: post
tags:
    - dartlang
    - documentation
    - Markdown
    - testing
category: jjinuxland
published: '2012-12-10T16:40:00-08:00'

---

<div dir="ltr" style="text-align: left;" trbidi="on"><p><i>Reposted from <a href="http://news.dartlang.org/2012/12/darts-approach-to-illiterate.html">Dart News &amp; Updates</a>:</i></p> <p>It's very common to embed code examples in technical documentation. However, doing so is kind of painful. First of all, the environment you use to edit the documentation may not be the same as the environment you use to write code. For instance, I generally use Dart Editor to write Dart code, but I use Sublime Text 2 to edit documentation written in HTML or Markdown. Secondly, it's difficult to run unit tests or use dart_analyzer if the code is trapped in documentation. This is a big problem for us on the Dart project because we move pretty quickly, and we want to make sure our documentation is always 100% correct. I've created a tool called <a href="https://github.com/dart-lang/doc-code-merge">doc-code-merge</a> to solve this problem.</p> <p>doc-code-merge is the opposite of what Donald Knuth labelled <a href="http://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a>. doc-code-merge lets you write your documentation and your code examples completely separately. When you run doc_code_merge.dart, it makes a copy of your documentation with all the examples merged in. The Pragmatic Programmers mentioned using a similar tool when writing <a href="http://pragprog.com/the-pragmatic-programmer">The Pragmatic Programmer: From Journeyman to Master</a>, so the idea has probably been around for a while.</p> <p>Using doc-code-merge is easy. Start by writing some documentation such as:</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-3asVstRYX3w/UMZ8GLix8MI/AAAAAAAAAo4/hOKnhx1BHGE/s1600/Screen%2BShot%2B2012-12-10%2Bat%2B4.05.22%2BPM.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="146" width="219" src="http://2.bp.blogspot.com/-3asVstRYX3w/UMZ8GLix8MI/AAAAAAAAAo4/hOKnhx1BHGE/s320/Screen%2BShot%2B2012-12-10%2Bat%2B4.05.22%2BPM.png" /></a></div> <p>Then, write some code such as:</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-xoWxSOIhpfU/UMZ8Mgmt7oI/AAAAAAAAApE/1ZKiNMBJuMo/s1600/Screen%2BShot%2B2012-12-10%2Bat%2B4.06.33%2BPM.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="128" width="218" src="http://4.bp.blogspot.com/-xoWxSOIhpfU/UMZ8Mgmt7oI/AAAAAAAAApE/1ZKiNMBJuMo/s320/Screen%2BShot%2B2012-12-10%2Bat%2B4.06.33%2BPM.png" /></a></div> <p>Now, run doc_code_merge.dart:</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-ePWDHcfLyIo/UMZ9C_RLk4I/AAAAAAAAApQ/kakdXU5SQMk/s1600/Screen%2BShot%2B2012-12-10%2Bat%2B4.17.21%2BPM.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="46" width="320" src="http://3.bp.blogspot.com/-ePWDHcfLyIo/UMZ9C_RLk4I/AAAAAAAAApQ/kakdXU5SQMk/s320/Screen%2BShot%2B2012-12-10%2Bat%2B4.17.21%2BPM.png" /></a></div> <p>This results in:</p> <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-hlhi0oywk68/UMZ9I_9LmOI/AAAAAAAAApc/-VpJmsp4tpA/s1600/Screen%2BShot%2B2012-12-10%2Bat%2B4.06.59%2BPM.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="146" width="257" src="http://3.bp.blogspot.com/-hlhi0oywk68/UMZ9I_9LmOI/AAAAAAAAApc/-VpJmsp4tpA/s320/Screen%2BShot%2B2012-12-10%2Bat%2B4.06.59%2BPM.png" /></a></div> <p>Easy peasy! doc-code-merge automatically handles things like indenting code blocks when generating Markdown and HTML escaping code when generating HTML.</p> <p>Although doc-code-merge is written in Dart, it'll work with almost any programming language and with almost any type of documentation as long as the documentation is written in text such as HTML or Markdown. We're hoping to make use of it for the Dart web site, <a href="http://www.dartlang.org/">dartlang.org</a>, and for our book on Dart, <a href="http://shop.oreilly.com/product/0636920025719.do">Dart: Up and Running</a>.</p> <p>If you're interested in using doc-code-merge, check out the <a href="https://github.com/dart-lang/doc-code-merge">README</a>. As always, we invite you to join the Dart <a href="https://groups.google.com/a/dartlang.org/forum/#!forum/misc">mailing list</a> and ask questions on <a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a>.</p></div>
