---
title: 'HTML5 Dev Conf'
layout: post
tags:
    - Backbone.js
    - coffeescript
    - dartlang
    - html5
    - JavaScript
    - web
category: jjinuxland
published: '2012-05-22T10:11:00-07:00'

---

<div dir="ltr" style="text-align: left;" trbidi="on"><p>I went to <a href="http://html5devconf.com/">HTML5 Dev Conf</a> yesterday.  The following is a loose collection of my notes.</p> <p>First of all, the place was packed!  Even the second-tier talks didn't have any standing room left over.</p> <p>The Backbone.js talk was especially packed.  Not only could I not get into the room, I couldn't even get anywhere near the door.  In general, Backbone.js was an extremely hot topic.  However, most people admitted that they hadn't used it.</p> <h5>Douglas Crockford's Keynote</h5> <p>JSON has no version number.  "Everything with a 1.0 gets a 1.1 and a 2.0, and it's all crap until you get to 3.0, so JSON has no version number."  <p>He talked about the first browser, Mosaic.  Some company patented an &lt;embed&gt; tag to embed content in a rectangle in the browser.  He said that the company was a patent troll, and they went after everyone trying to make money.  They figured their patent covered JavaScript, image tags, etc.  Apple settled.  M$ fought them for years.  Yahoo finally led the defense and won.</p> <p>Crockford was using an Alienware laptop.</p> <p>Crockford is a calming speaker, but it's easy to overlook the fact that he has strong, unusual opinions.</p> <p>Crockford cancelled his Facebook account because of their privacy policy.</p> <p>Crockford is against software patents (and possibly against all patents?).</p> <p>Yahoo sued Facebook because of patent infringement.  That's why he left Yahoo. He works at PayPal now.</p> <p>Crockford spent some time bashing Yahoo.  However, he was also hopeful that the company could be turned around.</p> <p>He said Yahoo had a globally scalable NoSQL database in 1995.</p> <p>"Yahoo is profitable and has always been profitable."</p> <p>Yahoo's business is to do "Anything [on the web] for a dollar."</p> <p>Yahoo is organized into properties.  It's 100 companies that share a cafeteria.</p> <p>They "misuse" agility.</p> <p>Crockford kept answering his cellphone <i>during</i> his talk.  At first I thought it was a joke, but I'm pretty sure it wasn't.  It wasn't even someone important.</p> <p>He doesn't have a degree in CS.  He has a degree in broadcasting.</p> <p>He thinks that Yahoo should:</p> <ul><li>Optimize for customer value.</li><li>Create a culture of excellence ("Yahoo doesn't have that.").</li><li>Fork Node.JS and create Ynode.</li><li>Desilo the company.</li><li>Focus on improving and integrating Yahoo Groups (it's basically 12 year old software).</li><li>Fix the research group.</li><li>Bring back Jerry Yang as chief Yahoo (instead of CEO).</li></ul> <p>He ended the talk by saying, "Don't forget your semicolons!"</p> <p>He called himself "Doug Crockford".</p> <p>He said, "I love CoffeeScript," but also expressed certain reservations about it.</p> <h5>Behind the Scenes of "Cut the Rope"</h5> <p>This talk was given by Giorgio Sardo who does Windows evangelism at Microsoft Corp.</p> <p>He showed PacMan on an really large board (80,000 user generated boards all connected).</p> <p>"IE9 Hardware Accelerated HTML5."</p> <p>"Cut the Rope" was originally a native iOS application.  They rewrote it in HTML5.</p> <p>It was 40,000 lines of code.  They translated it directly to JavaScript.  They went from OpenGL to Canvas.</p> <p>They're using setInterval for animation.  They have one image with all the different animation states.</p> <p>The rope was the hardest part.  It's made of 20,000 triangles.  There's another 10,000 triangles for the shadow.  It's easier on HTML5 because they can use bezier lines.</p> <p>He used a JavaScript profiler to fix his performance problems.  It saved the project.</p> <p>He's using Microsoft Visual Studio (of course).</p> <p>He's using jQuery.</p> <p>They worked on the project for 12+ weeks.</p> <p>The original game developers are in Russia.</p> <p>Windows 8 makes it easy to take a web app and make it a desktop app.</p> <p>There's a Windows 8 store.</p> <h5>Benefits of CoffeeScript</h5> <p>For some reason, the speaker didn't show up.  I offered to give an introduction to Dart.  Someone else offered to give an introduction to CoffeeScript.  After doing our respective short introductions, we held a panel-like discussion in which we answered questions from the audience.</p> <p>CoffeeScript has an emphasis on conciseness, and it is inspired by Python and Ruby.  Dart has an emphasis on building extremely large, client-side applications, and it is inspired by JavaScript and Java.</p> <p>I had always heard that CoffeeScript had a weird scoping issue.  If you have a local variable, and someone introduces a module-level variable of the same name, your local variable will start referring to the module-level variable instead of shadowing it.  The CoffeeScript panelist said that he worked around this problem by using a different version of CoffeeScript that has ":=" syntax for setting non-local variables.</p> <p>CoffeeScript places an emphasis on translating to JavaScript in very predictable ways.  Dart places an emphasis on avoiding "puzzlers" (such as those present in the "Java Puzzlers" book).</p> <p>CoffeeScript generates JavaScript that it is easy to debug.  Dart can be debugged natively using a version of Chromium that has Dart support built in.</p> <p>CoffeeScript takes JavaScript and makes it "even more dynamic".  Dart takes JavaScript and adds optional static typing in order to facilitate building larger projects.</p> <p>Overall, the panel discussion was friendly and enlightening.</p> <h5>Cross Platform Mobile and Web</h5> <p>This was a talk from a guy at LinkedIn on how they handle developing for the web and multiple mobile platforms.</p> <p>Unfortunately, I missed the first 15 minutes.</p> <p>Their iOS application is a mix of native and web code.  It's 20% native code and 80% web code.</p> <p>They use native code for all infinite lists because it's too hard to do infinite lists using web code.</p> <p>They decided PhoneGap was not a good fit for them.  One of the reasons was that they wanted to decide whether to use native code or web code on a case-by-case basis.</p> <p>On Android, they wrote more native code than they did on iOS.  About 80% of the code was native.  However, they're slowly transitioning more toward HTML5.</p> <p>For testing, they're using many projects, including: Vows, Robotium, Selenium, FoneMonkey, GHUnit, Hudson, PhantonJS, and some internal stuff.</p> <p>They ship everything twice a week.</p> <p>The apps and server deploy independently.</p> <p>They're using Node.js.  They upgrade it frequently.</p> <p>A single Node.js instance can achieve 150qps and only requires 50mb.</p> <p>LinkedIn uses Java, Scala, Python, Ruby, Node.js, etc.</p> <p>IntelliJ can step through Node.js code thanks to the WebKit debugger.</p> <p>They don't have a good debugging solution for mobile.  They rely on logging.</p> <p>They use MVC on the client side.</p> <p>A "screen" is a "div to div move."</p> <p>A "page" requires a "whole new browser page load."</p> <p>A single page can have multiple screens.  Each screen has a controller and a  model.</p> <p>They want to reduce the number of frameworks they use and increase the number of libraries they use.  A framework calls you, whereas you call a library.</p> <p>They use Backbone.js.  It:</p> <ul><li>Provides routing from screen to screen.</li><li>Controls screen lifecycle.</li><li>Controls view updating based on model changes.</li><li>Has model construct for validation.</li></ul> <p>They're very tied to Backbone.js.</p> <p>They use several libraries including: Zepto (to manipulate the DOM), iScroll (for inertial scrolling), and Underscore (which provides collections helpers, binding constructs, and templating).</p> <p>They use SASS.</p> <p>They embrace raw JavaScript instead of using CoffeeScript, etc.</p> <p>They use Closure to minify and optimize their JavaScript.  It also compiles their templates.</p> <p>A bundle is a list of screens, templates, etc.</p> <p>They cache bundles, images (?), etc. into local storage.  They use MD5 hashes for files, and they only have to download diffs of files when they make changes.  They said that mobile browser caches were very fickle, so they prefer to use offline storage to manage their own cache.</p> <p>They use Jasmine as well as Selenium.</p> <p>They use Capistrano.</p> <h5>Responsive Web Design: Conquering the Web, One Screen at a Time</h5> <p>This talk was mostly geared toward designers.</p> <p>Responsive Web Design emphasizes web designs that work well on a variety of web and mobile devices.  It came out of the "fluid layout" movement.  However, these designs use CSS and other tricks to adapt themselves to look good everywhere, even on mobile.</p> <p>Break points define when you should switch to a different layout.  Try resizing your window drastically to see if there are break points that cause the application you're using to switch to a different layout.</p> <p>Layouts are the thing that change the most.  However, you might want to change the type (i.e. font) as well.</p> <p>On mobile, you should probably use 14px Arial for your font.</p> <p>You might want to change which image you show based on the screen size.  The way to do this hasn't completely been resolved.  There's some new "picture" element they're playing with in the standards bodies (the W3C?).</p> <p>"Starting with the desktop may be an increasingly backwards way of thinking about a Web product." -- Luke Wroblewski</p> <p>He said half of your users are mobile.</p> <p>Opera is the most popular mobile browser world wide (I assume this refers to cellphones that aren't running Android or iOS).</p> <p>He said QA is very important.  You have to test on many different devices.</p> <p>Focus on your content!!!</p> <p>He claimed that Flash doesn't work reliably on Android.</p> <p><a href="http://mediaqueri.es">mediaqueri.es</a> has a lot of examples of sites that use responsive web design.</p> <p>There is a fold, but ignore it.  Focus more on horizontal sizes, not vertical.</p> <p>These are the screen widths you should consider:  320px (important), 480px (sideways iPhone), 640px, 768px (important; older iPads), 960px (important), 1184px, and 1400px.</p> <p>Sweat the small stuff such as type (i.e. font), navigation, and links.</p> <p>44px is a good rule of thumb for a nice navigational link.</p> <p>Design in tiles.  Tiles should be flexible.  They can be swapped.</p> <p>If you want to learn more, search for "media queries".</p> <p>See also <a href="http://developer.mozilla.org/en/CSS/Media_queries">developer.mozilla.org/en/CSS/Media_queries</a>.  <p>Media queries let you specify different CSS for different situations.</p> <p>Examples:</p> <pre>@media screen and (max-device-width: 810px) {<br />  div {<br />    background: blue;<br />  }<br />}<br /><br />&lt;link rel="stylesheet" media="screen and (color)" href="foo.css"&gt;</pre> <p>There are many media features you can use such as width, device-width, orientation, color, etc.</p> <p>See also: <a href="http://responsive.is">responsive.is</a></p> <p>"Working on the web...is defined by its transcience, often refined or replaced within a year or two." -- Ethan Marcotte</p> <p>He uses SASS.  He doesn't like LESS because it's based on JavaScript.</p> <p>Twitter has a framework called Bootstrap.  He doesn't use it.</p> <h5>Adding a Server-side Backend to Your JS-powered App</h5> <p>This was a pitch for StackMob.</p> <p>StackMob, in my own words, is a platform as a service offering for pure client-side applications written in JavaScript.  They provide the server-side infrastructure so that you don't have to.</p> <p>StackMob uses Backbone.js.</p> <p>He said that when you use the Facebook API and the Twitter API, it's easy to forget that those companies have massive backends.</p> <p>StackMob's goal is to create a server-side backend for your JavaScript-powered application.</p> <p>They provide many backend services such as user auth, a datastore, security, GeoSpatial APIs, push support, static file hosting, social integration, custom server-side code, and analytics.</p> <p>They're a "mobile backend platform".</p> <p>They are "giving everyone access to 'big company' backend power."</p> <p>They are "lowering barrier of entry."</p> <p>The backend is accessible via a JavaScript API built on top of a RESTful API.</p> <p>It's based on OAuth2, Ajax, and Backbone.js models.</p> <p>They've integrated persistence to StackMob into their Backbone.js-based API.</p> <p>They have a nice looking dashboard.</p> <p>It looks like their datastore is schemaless.</p> <p>They use a mix of MySQL and MongoDB.</p> <p>You can fetch an object as well as all of its related objects, up to depth of 3. I'm worried about the security implications of retrieving things you shouldn't have access to.</p> <p>I'm also worried that someone can hack your JavaScript to do things that your app wouldn't want you to do.  I don't think StackMob has any way to differentiate trustworthy JavaScript from non-trustworthy JavaScript.</p> <p>They're using OAuth2.</p> <p>Public/Private keys identify your app's requests.</p> <p>They're going to add access controls "very soon".  This would allow you to share access to certain objects.</p> <p>I really don't think they have a viable, comprehensive security model yet.</p> <p>They're a Java/Scala shop.</p> <p>They have a way for you to run your Java on their servers.</p> <p>They don't have an approach to server-side validation in the SDK yet.</p> <p>If you use a password field, they will explicitly not give it back to you when you load the user object.</p> <p>They deal with cross-domain issues by hosting your static files.</p> <p>They support custom domains.</p> <p>They're integrated with GitHub.  I.e. they can update your code when you push to GitHub.</p> <p>They give you separate database environments for development and production.</p> <p>They encrypt your data before storing it in the database.</p> <p>It's free for limited use.  They charge for higher volume use.</p> <p>They have support for using S3.</p> <p>He used reveal.js for his slides.</p> <h5>0-60: Animating the Web</h5> <p>This talk was given by Jeremy Kahn who works for YouTube.  (I've never met him.)</p> <p>Animation is used to draw a connection between two separate things.</p> <p>"Flash is not the future of the web."</p> <p>CSS3 has powerful APIs for smooth animations on the web.</p> <p>Ideally, we want 60 frames per second.  Flash's default frame rate is 12fps.</p> <p>Tweening is a technique where you move from a start position to a stop position over a period of time.  The goal is to let the computer do the hard work of making the animation between the start position and stop position work.  Tweening is a popular technique in Flash.  It's also supported by jQuery's animate function.</p> <p>Keyframing is a little more complex than tweening.  Keyframing lets you have any number of points in between the start and the stop.</p> <p>Here are examples of the two techniques using jQuery:</p> <pre><br />// Tweening<br />$ell<br />  .css({ left: -700 })<br />  .animate({ left: 0 }, 2500);<br /><br />// Keyframing<br />$ell<br />  .keyframe(0, { left: -700 })<br />  .keyframe(2500, { left: 0 });<br /></pre> <p><i>Do not</i> use setInterval for animation.  If your callback takes too long, all sorts of bad things will happen.</p> <p>It's better to use setTimeout.</p> <p>It's even better to use requestAnimationFrame.  It tries to call itself 60 times a second.</p> <p>When you think about requestAnimationFrame, take into consideration the time delta, and make sure you have a terminating condition.</p> <p>You can use MVC informally to break up your animation code into separate functions.</p> <p>You can do animation using only CSS3 (i.e. without using JavaScript).</p> <p>There is CSS syntax for keyframes (it uses @).</p> <p>CSS has support for easing.</p> <p>Ceaser is a tool for visually generating bezier curves for CSS easing.</p> <p>Use different easing functions for X and Y to get interesting curves in your animations.</p> <p>JavaScript animation:<br>Pros: flexible, runs anywhere<br>Cons: Everything lives in the JavaScript thread</p> <p>CSS animation:<br>Pros: Better performance / smoother (it uses your computer's graphics card)<br>Cons: Limited easing formula choices, not supported everywhere</p> <p>The difference in performance is huge on mobile devices.</p> <p>Minimize reflows.</p> <p>One approach is to use "position: absolute".</p> <p>A better approach is to use the transform property.</p> <p>Animating &lt;canvas&gt; requires different techniques.</p> <p>Avoid clearing the canvas on every animation frame.  This is the number one performance killer.</p> <p>There are a couple techniques that help with &lt;canvas&gt; animations--pre-rendering and using multiple canvases (one for the background and one for each shape).</p> <p>CSS transforms can use sub-pixel rendering.</p> <p>When you scale stuff, CSS doesn't smooth out stuff once you get above 1.0. Hence, always scale up to 1.0.  Try not to exceed 1.0.</p> <p>Here is a list of CSS tools:  Ceaser, SASS mixins</p> <p>Here is a list of tools for JavaScript tweening:  jQuery, Zepto, Shifty (which he wrote)</p> <p>Here is a list of keyframing tools:  Rekapi (which he wrote; it's a model and controller for keyframe animations)</p> <p>Here is a list of graphical tools:  Sencha Animator, Adobe Edge, Stylie (which he wrote)</p> <p>HTML5 is still trying to catch up with Flash when it comes to authoring tools.</p> <p>Should you use JavaScript or CSS for animations?  He recommended using JavaScript to control CSS animations.</p> <p>HTML5 is still trying to catch up with Flash's authoring environment.</p> <p>He used Keynote for his slides.  Keynote has some cool transitions.</p> <p>Hype is an HTML5 authoring tool.</p> <p>You should separate your state logic and your drawing logic.</p> <h5>Mobile Web Debugging and Performance</h5> <p>The speaker works at Oracle.  He uses PhoneGap.</p> <p>He wants to replicate the experience that Developer Tools provide on Chrome, but in a mobile context.</p> <p>There's a JavaScript debugger on iOS.  It shows errors.  It's very limited.</p> <p>The same is true in the debugger for Android.  It's a "little better than iOS."</p> <p>WebKit supports remote debugging.  Hence, you can debug an app running on the simulator.</p> <p>Chrome for Android 4.0 and above has USB debugging.  This lets you debug on a separate port.  It looks like Developer Tools on Chrome.  Search for "Chrome for Android remote debugging".</p> <p>abd = Android Debug Bridge</p> <p>See: <a href="http://code.google.com/chrome/mobile">code.google.com/chrome/mobile</a></p> <p>This doesn't currently work for WebView widgets because those don't run in Chrome.</p> <p>"The native WebKit browser is the default for WebView apps, and it's way behind the curve."</p> <p>Opera also supports remote debugging.  You need Opera on your desktop and Opera mobile on your mobile device.</p> <p>Firefox Mobile also has remote debugging, but it's brand new.  It was developed at a hackathon.</p> <p>iWebInspector is a web debugging tool for the iOS simulator.  It was written by the guy who wrote jQuery Mobile.</p> <p>Remote JS is a tool from Sencha Touch.  It's tool for Android applications that use WebViews.  You don't have to use Sencha Touch in order to use it.</p> <p>Wiener (see the Apache Cordova Project) is another tool for doing remote debugging.  However, it's somewhat limited.</p> <p><a href="http://jsconsole.com">jsconsole.com</a> is a JavaScript console that you can add to your app.</p> <p>Socketbug is a project written using Node.js and Socket.IO.  It's another tool for mobile JavaScript debugging.  It supports iOS, Android, and Palm.</p> <p>Adobe Shadow is a commercial tool for mobile JavaScript debugging.  It's currently free.  It allows you to control multiple remote devices at the same time.</p> <p>blaze.io has a free mobile web performance testing tool called Mobitest.</p> <p>MobilePerf is another mobile web performance testing tool.</p></div>
